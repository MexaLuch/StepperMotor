# StepperMotor Library v2.0

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞** –¥–ª—è **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∞–≥–æ–≤—ã–º–∏ –¥–≤–∏–≥–∞—Ç–µ–ª—è–º–∏** —á–µ—Ä–µ–∑ –¥—Ä–∞–π–≤–µ—Ä DM556 (–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **–∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö —Ç–∞–π–º–µ—Ä–æ–≤ ESP32** –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ä–∞–∑–≥—Ä—É–∑–∫–∏ CPU.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã ESP32** - –ø–æ–ª–Ω–∞—è —Ä–∞–∑–≥—Ä—É–∑–∫–∞ CPU
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –¥–æ 4 –º–æ—Ç–æ—Ä–∞–º–∏
- **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è —Ä–∞–±–æ—Ç–∞** - –º–æ—Ç–æ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ñ–æ–Ω–µ
- **–ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - —Ç–æ—á–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏** - —Ä–µ–≥—É–ª–∏—Ä—É–π—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –º–æ—Ç–æ—Ä–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ISR** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ 50,000 —à–∞–≥–æ–≤/—Å–µ–∫

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```cpp
#include "StepperMotor.h"

StepperMotor motor(12, 14, 27);  // ENA=12, DIR=14, PUL=27

void setup() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ—Ç–æ—Ä–∞
    motor.init();
    motor.enable();
    
    // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ –º–æ—Ç–æ—Ä—É (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
    assignTimerToMotor(&motor, TIMER_GROUP_0, TIMER_0);
}

void loop() {
    // –î–≤–∏–∂–µ–Ω–∏–µ: 400 —à–∞–≥–æ–≤ —Å –ø–µ—Ä–∏–æ–¥–æ–º 100 –º–∫—Å
    motor.go(400, 100);
    
    // CPU –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–≤–æ–±–æ–¥–µ–Ω –¥–ª—è –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—á!
}
```

## üîß –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞–º–∏

```cpp
#include "StepperMotor.h"

StepperMotor motor1(12, 14, 27);
StepperMotor motor2(12, 26, 25);
StepperMotor motor3(12, 33, 32);

void setup() {
    motor1.init(); motor1.enable();
    motor2.init(); motor2.enable();
    motor3.init(); motor3.enable();
    
    // –ù–∞–∑–Ω–∞—á–∞–µ–º —Ç–∞–π–º–µ—Ä—ã –º–æ—Ç–æ—Ä–∞–º (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
    assignTimerToMotor(&motor1, TIMER_GROUP_0, TIMER_0);
    assignTimerToMotor(&motor2, TIMER_GROUP_0, TIMER_1);
    assignTimerToMotor(&motor3, TIMER_GROUP_1, TIMER_0);
}

void loop() {
    // –í—Å–µ –º–æ—Ç–æ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!
    motor1.go(500, 100);   // 500 —à–∞–≥–æ–≤, 100 –º–∫—Å –ø–µ—Ä–∏–æ–¥
    motor2.go(-300, 80);   // -300 —à–∞–≥–æ–≤, 80 –º–∫—Å –ø–µ—Ä–∏–æ–¥
    motor3.go(200, 50);    // 200 —à–∞–≥–æ–≤, 50 –º–∫—Å –ø–µ—Ä–∏–æ–¥
}
```

## üìã –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ ESP32:
```
ESP32          DM556
D12 -------- ENA+    (–≤–∫–ª—é—á–µ–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞)
D14 -------- DIR+    (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
D27 -------- PUL+    (–∏–º–ø—É–ª—å—Å—ã)
GND -------- ENA-
GND -------- DIR-
GND -------- PUL-
```

## üìñ API

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### `go(long steps, int period)`
–û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –¥–≤–∏–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Ç–∞–π–º–µ—Ä
```cpp
motor.go(400, 100);   // 400 —à–∞–≥–æ–≤, –ø–µ—Ä–∏–æ–¥ 100 –º–∫—Å
motor.go(-200, 80);   // -200 —à–∞–≥–æ–≤, –ø–µ—Ä–∏–æ–¥ 80 –º–∫—Å
motor.go(100, 30);    // 100 —à–∞–≥–æ–≤, –ø–µ—Ä–∏–æ–¥ 30 –º–∫—Å (–≤—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)
```

#### `stop()`
–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è
```cpp
motor.stop();  // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–∞–π–º–µ—Ä –∏ –¥–≤–∏–∂–µ–Ω–∏–µ
```

#### `isMotorMoving()`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è
```cpp
if (motor.isMotorMoving()) {
    Serial.println("–ú–æ—Ç–æ—Ä –¥–≤–∏–∂–µ—Ç—Å—è");
}
```

#### `enable()` / `disable()` / `isEnabled()`
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–∏–µ–º/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ–º
```cpp
motor.enable();    // –í–∫–ª—é—á–∏—Ç—å –º–æ—Ç–æ—Ä
motor.disable();   // –í—ã–∫–ª—é—á–∏—Ç—å –º–æ—Ç–æ—Ä
if (motor.isEnabled()) { /* ... */ }
```

### –ú–µ—Ç–æ–¥—ã –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

#### `setCurrentPosition(long position)`
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
```cpp
motor.setCurrentPosition(1000);  // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é 1000
```

#### `getCurrentPosition()`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
```cpp
long pos = motor.getCurrentPosition();
```

#### `setHome(long position)` / `home()`
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–∞—à–Ω–µ–π –ø–æ–∑–∏—Ü–∏–µ–π
```cpp
motor.setHome(0);     // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–º–∞—à–Ω—é—é –ø–æ–∑–∏—Ü–∏—é
motor.home();         // –í–µ—Ä–Ω—É—Ç—å—Å—è –¥–æ–º–æ–π
```

### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```cpp
assignTimerToMotor(&motor, group, timer);    // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ –º–æ—Ç–æ—Ä—É (—Å –∞–≤—Ç. –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π)
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–∫–æ—Ä–æ—Å—Ç–∏ –¥–≤–∏–∂–µ–Ω–∏—è:
- **–ú–µ–¥–ª–µ–Ω–Ω–æ**: 1,000,000 –º–∫—Å –ø–µ—Ä–∏–æ–¥ = 1 —à–∞–≥/—Å–µ–∫
- **–°—Ä–µ–¥–Ω–µ**: 100,000 –º–∫—Å –ø–µ—Ä–∏–æ–¥ = 10 —à–∞–≥–æ–≤/—Å–µ–∫
- **–ë—ã—Å—Ç—Ä–æ**: 10,000 –º–∫—Å –ø–µ—Ä–∏–æ–¥ = 100 —à–∞–≥–æ–≤/—Å–µ–∫
- **–û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ**: 20 –º–∫—Å –ø–µ—Ä–∏–æ–¥ = 50,000 —à–∞–≥–æ–≤/—Å–µ–∫

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- **–ü—Ä—è–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ GPIO** - —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä—ã –≤–º–µ—Å—Ç–æ —Ñ—É–Ω–∫—Ü–∏–π
- **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** - –º–∞—Å–∫–∏ –ø–∏–Ω–æ–≤ –∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç—ã –ø–æ–∑–∏—Ü–∏–∏

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –Ω–∞–∑–Ω–∞—á–∞–π—Ç–µ —Ç–∞–π–º–µ—Ä—ã** —á–µ—Ä–µ–∑ `assignTimerToMotor()`
2. **–¢–∞–π–º–µ—Ä—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏
4. **–ü–µ—Ä–∏–æ–¥ –∏–º–ø—É–ª—å—Å–∞** = –≤—Ä–µ–º—è HIGH + –≤—Ä–µ–º—è LOW (–≤ –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥–∞—Ö)
5. **–ú–∞–∫—Å–∏–º—É–º 4 –º–æ—Ç–æ—Ä–∞** (–ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ç–∞–π–º–µ—Ä–æ–≤ ESP32)
6. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥** = 20 –º–∫—Å (50,000 —à–∞–≥–æ–≤/—Å–µ–∫)

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ v2.0

- ‚úÖ **–ü–æ–ª–Ω–∞—è —Ä–∞–∑–≥—Ä—É–∑–∫–∞ CPU** - —Ç–∞–π–º–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –∂–µ–ª–µ–∑–µ
- ‚úÖ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –¥–æ 4 –º–æ—Ç–æ—Ä–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ **–¢–æ—á–Ω–æ–µ –≤—Ä–µ–º—è** - –∞–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–º–ø—É–ª—å—Å–æ–≤
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–π API** - `motor.go(steps, period)`
- ‚úÖ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –¥–æ 50,000 —à–∞–≥–æ–≤/—Å–µ–∫

## üîå –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: ESP32
- **–î—Ä–∞–π–≤–µ—Ä**: DM556 (–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ)
- **Arduino IDE**: –î–∞
- **PlatformIO**: –î–∞
- **–í–µ—Ä—Å–∏—è**: v2.0 (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```
StepperMotor/
‚îú‚îÄ‚îÄ StepperMotor.h          # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ StepperMotor.cpp        # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ library.properties      # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è Arduino IDE
‚îú‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ examples/
    ‚îî‚îÄ‚îÄ TimerBased/        # –ü—Ä–∏–º–µ—Ä —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ç–∞–π–º–µ—Ä–∞–º–∏
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License 
